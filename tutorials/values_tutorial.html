
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Values Tutorial &#8212; symforce 0.5.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Codegen Tutorial" href="codegen_tutorial.html" />
    <link rel="prev" title="Cameras Tutorial" href="cameras_tutorial.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt .copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<section id="Values-Tutorial">
<h1>Values Tutorial<a class="headerlink" href="#Values-Tutorial" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="../api/symforce.values.values.html#symforce.values.values.Values">Values</a> objects are ordered dict-like containers used to store multiple heterogeneous objects, normally for the purpose of function generation.</p>
<p>Typically a Values object will first be created to defines a number of different symbolic inputs (e.g. rotations, translations, scalars, poses, cameras, etc.). Then, a second Values object will be created to describe the objects to be returned from the function, which will be composed of the symbolic elements defined by the input Values object.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Setup</span>
<span class="kn">import</span> <span class="nn">symforce</span>

<span class="n">symforce</span><span class="o">.</span><span class="n">set_symbolic_api</span><span class="p">(</span><span class="s2">&quot;sympy&quot;</span><span class="p">)</span>
<span class="n">symforce</span><span class="o">.</span><span class="n">set_log_level</span><span class="p">(</span><span class="s2">&quot;warning&quot;</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">symforce.symbolic</span> <span class="k">as</span> <span class="nn">sf</span>
<span class="kn">from</span> <span class="nn">symforce.values</span> <span class="kn">import</span> <span class="n">Values</span>
<span class="kn">from</span> <span class="nn">symforce.notebook_util</span> <span class="kn">import</span> <span class="n">display</span><span class="p">,</span> <span class="n">display_code</span><span class="p">,</span> <span class="n">display_code_file</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">inputs</span> <span class="o">=</span> <span class="n">Values</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="n">sf</span><span class="o">.</span><span class="n">Symbol</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">),</span>
    <span class="n">y</span><span class="o">=</span><span class="n">sf</span><span class="o">.</span><span class="n">Rot2</span><span class="o">.</span><span class="n">symbolic</span><span class="p">(</span><span class="s2">&quot;c&quot;</span><span class="p">),</span>
<span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">inputs</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Values(
  x: x,
  y: &lt;Rot2 &lt;C real=c_re, imag=c_im&gt;&gt;,
)
</pre></div></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">.add()</span></code> method can add a symbol using its name as the key:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">inputs</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">sf</span><span class="o">.</span><span class="n">Symbol</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">))</span>
<span class="n">display</span><span class="p">(</span><span class="n">inputs</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Values(
  x: x,
  y: &lt;Rot2 &lt;C real=c_re, imag=c_im&gt;&gt;,
  foo: foo,
)
</pre></div></div>
</div>
<p>Adding sub-values are well encouraged:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">symbols</span><span class="p">(</span><span class="s2">&quot;x y&quot;</span><span class="p">)</span>
<span class="n">expr</span> <span class="o">=</span> <span class="n">x</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">sf</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="o">/</span> <span class="n">x</span> <span class="o">**</span> <span class="mi">2</span>
<span class="n">inputs</span><span class="p">[</span><span class="s2">&quot;states&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Values</span><span class="p">(</span><span class="n">p</span><span class="o">=</span><span class="n">expr</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">inputs</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Values(
  x: x,
  y: &lt;Rot2 &lt;C real=c_re, imag=c_im&gt;&gt;,
  foo: foo,
  states:   Values(
    p: x**2 + sin(y)/x**2,
  ),
)
</pre></div></div>
</div>
<p>A Values serializes to a depth-first traversed list. This means it implements StorageOps:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">display</span><span class="p">(</span><span class="n">inputs</span><span class="o">.</span><span class="n">to_storage</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="math notranslate nohighlight">
$\displaystyle \left[ x, \  c_{re}, \  c_{im}, \  foo, \  x^{2} + \frac{\sin{\left(y \right)}}{x^{2}}\right]$</div></div>
</div>
<p>We can also get a flattened lists of keys and values, with <code class="docutils literal notranslate"><span class="pre">.</span></code> separation for sub-values:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">display</span><span class="p">(</span><span class="n">inputs</span><span class="o">.</span><span class="n">items_recursive</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[(&#39;x&#39;, x),
 (&#39;y&#39;, &lt;Rot2 &lt;C real=c_re, imag=c_im&gt;&gt;),
 (&#39;foo&#39;, foo),
 (&#39;states.p&#39;, x**2 + sin(y)/x**2)]
</pre></div></div>
</div>
<p>Note that there is a <code class="docutils literal notranslate"><span class="pre">.keys_recursive()</span></code> and a <code class="docutils literal notranslate"><span class="pre">.values_recursive()</span></code> which return flattened lists of keys and values respectively:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">display</span><span class="p">(</span><span class="n">inputs</span><span class="o">.</span><span class="n">keys_recursive</span><span class="p">())</span>
<span class="n">display</span><span class="p">(</span><span class="n">inputs</span><span class="o">.</span><span class="n">values_recursive</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;x&#39;, &#39;y&#39;, &#39;foo&#39;, &#39;states.p&#39;]
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[x, &lt;Rot2 &lt;C real=c_re, imag=c_im&gt;&gt;, foo, x**2 + sin(y)/x**2]
</pre></div></div>
</div>
<p>To fully reconstruct the types in the Values from the serialized scalars, we need an index that describes which parts of the serialized list correspond to which types. The spec is <code class="docutils literal notranslate"><span class="pre">T.Dict[str,</span> <span class="pre">IndexEntry]</span></code> where <code class="docutils literal notranslate"><span class="pre">IndexEntry</span></code> has attributes <code class="docutils literal notranslate"><span class="pre">offset,</span> <span class="pre">storage_dim,</span> <span class="pre">datatype,</span> <span class="pre">shape,</span> <span class="pre">item_index</span></code>:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">index</span> <span class="o">=</span> <span class="n">inputs</span><span class="o">.</span><span class="n">index</span><span class="p">()</span>
<span class="n">index</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
OrderedDict([(&#39;x&#39;,
  IndexEntry(offset=0, storage_dim=1, _module=&#39;builtins&#39;, _qualname=&#39;float&#39;, shape=None, item_index=None)),
 (&#39;y&#39;,
  IndexEntry(offset=1, storage_dim=2, _module=&#39;symforce.geo.rot2&#39;, _qualname=&#39;Rot2&#39;, shape=None, item_index=None)),
 (&#39;foo&#39;,
  IndexEntry(offset=3, storage_dim=1, _module=&#39;builtins&#39;, _qualname=&#39;float&#39;, shape=None, item_index=None)),
 (&#39;states&#39;,
  IndexEntry(offset=4, storage_dim=1, _module=&#39;symforce.values.values&#39;, _qualname=&#39;Values&#39;, shape=None, item_index=OrderedDict([(&#39;p&#39;, IndexEntry(offset=0, storage_dim=1, _module=&#39;builtins&#39;, _qualname=&#39;float&#39;, shape=None, item_index=None))])))])
</pre></div></div>
</div>
<p>With a serialized list and an index, we can get the values back:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">inputs2</span> <span class="o">=</span> <span class="n">Values</span><span class="o">.</span><span class="n">from_storage_index</span><span class="p">(</span><span class="n">inputs</span><span class="o">.</span><span class="n">to_storage</span><span class="p">(),</span> <span class="n">index</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">inputs</span> <span class="o">==</span> <span class="n">inputs2</span>
<span class="n">display</span><span class="p">(</span><span class="n">inputs</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Values(
  x: x,
  y: &lt;Rot2 &lt;C real=c_re, imag=c_im&gt;&gt;,
  foo: foo,
  states:   Values(
    p: x**2 + sin(y)/x**2,
  ),
)
</pre></div></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">item_index</span></code> is a recursive structure that can contain the index for a sub-values:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">item_index</span> <span class="o">=</span> <span class="n">inputs</span><span class="o">.</span><span class="n">index</span><span class="p">()[</span><span class="s2">&quot;states&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">item_index</span>
<span class="k">assert</span> <span class="n">item_index</span> <span class="o">==</span> <span class="n">inputs</span><span class="p">[</span><span class="s2">&quot;states&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>We can also set sub-values directly with dot notation in the keys. They get split up:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">inputs</span><span class="p">[</span><span class="s2">&quot;states.blah&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">display</span><span class="p">(</span><span class="n">inputs</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Values(
  x: x,
  y: &lt;Rot2 &lt;C real=c_re, imag=c_im&gt;&gt;,
  foo: foo,
  states:   Values(
    p: x**2 + sin(y)/x**2,
    blah: 3,
  ),
)
</pre></div></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">.attr</span></code> field also allows attribute access rather than key access:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="n">inputs</span><span class="p">[</span><span class="s2">&quot;states.p&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="n">inputs</span><span class="p">[</span><span class="s2">&quot;states&quot;</span><span class="p">][</span><span class="s2">&quot;p&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="n">inputs</span><span class="o">.</span><span class="n">attr</span><span class="o">.</span><span class="n">states</span><span class="o">.</span><span class="n">p</span>
<span class="n">display</span><span class="p">(</span><span class="n">inputs</span><span class="o">.</span><span class="n">attr</span><span class="o">.</span><span class="n">states</span><span class="o">.</span><span class="n">p</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="math notranslate nohighlight">
$\displaystyle x^{2} + \frac{\sin{\left(y \right)}}{x^{2}}$</div></div>
</div>
<p>Finally, SymForce adds the concept of a name scope to namespace symbols. Within a scope block, symbol names get prefixed with the scope name:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">sf</span><span class="o">.</span><span class="n">scope</span><span class="p">(</span><span class="s2">&quot;params&quot;</span><span class="p">):</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Symbol</span><span class="p">(</span><span class="s2">&quot;cost&quot;</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="math notranslate nohighlight">
$\displaystyle params.cost$</div></div>
</div>
<p>A common use case is to call a function that adds symbols within your own name scope to avoid name collisions. You can also chain name scopes:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">v</span> <span class="o">=</span> <span class="n">Values</span><span class="p">()</span>
<span class="n">v</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">sf</span><span class="o">.</span><span class="n">Symbol</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">))</span>
<span class="k">with</span> <span class="n">sf</span><span class="o">.</span><span class="n">scope</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">):</span>
    <span class="n">v</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">sf</span><span class="o">.</span><span class="n">Symbol</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">))</span>
    <span class="k">with</span> <span class="n">sf</span><span class="o">.</span><span class="n">scope</span><span class="p">(</span><span class="s2">&quot;bar&quot;</span><span class="p">):</span>
        <span class="n">v</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">sf</span><span class="o">.</span><span class="n">Symbol</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">))</span>
<span class="n">display</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">attr</span><span class="o">.</span><span class="n">foo</span><span class="o">.</span><span class="n">bar</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Values(
  x: x,
  foo:   Values(
    x: foo.x,
    bar:     Values(
      x: foo.bar.x,
    ),
  ),
)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="math notranslate nohighlight">
$\displaystyle foo.bar.x$</div></div>
</div>
<p>The values class also provides a <code class="docutils literal notranslate"><span class="pre">.scope()</span></code> method that not only applies the scope to symbol names but also to keys added to the Values:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">v</span> <span class="o">=</span> <span class="n">Values</span><span class="p">()</span>
<span class="k">with</span> <span class="n">v</span><span class="o">.</span><span class="n">scope</span><span class="p">(</span><span class="s2">&quot;hello&quot;</span><span class="p">):</span>
    <span class="n">v</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span> <span class="o">**</span> <span class="mi">2</span>
    <span class="n">v</span><span class="p">[</span><span class="s2">&quot;z&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Symbol</span><span class="p">(</span><span class="s2">&quot;z&quot;</span><span class="p">)</span>
<span class="n">v</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Values(
  hello:   Values(
    y: x**2,
    z: hello.z,
  ),
)
</pre></div></div>
</div>
<p>This flexible set of features provided by the Values class allows conveniently building up large expressions, and acts as the interface to code generation.</p>
<section id="Lie-Group-Operations">
<h2>Lie Group Operations<a class="headerlink" href="#Lie-Group-Operations" title="Permalink to this headline">¶</a></h2>
<p>One useful feature of Values objects is that element-wise Lie group operations on can be performed on them.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">lie_vals</span> <span class="o">=</span> <span class="n">Values</span><span class="p">()</span>
<span class="n">lie_vals</span><span class="p">[</span><span class="s2">&quot;scalar&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Symbol</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">)</span>
<span class="n">lie_vals</span><span class="p">[</span><span class="s2">&quot;rot3&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Rot3</span><span class="o">.</span><span class="n">symbolic</span><span class="p">(</span><span class="s2">&quot;rot&quot;</span><span class="p">)</span>

<span class="n">sub_lie_vals</span> <span class="o">=</span> <span class="n">Values</span><span class="p">()</span>
<span class="n">sub_lie_vals</span><span class="p">[</span><span class="s2">&quot;pose3&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Pose3</span><span class="o">.</span><span class="n">symbolic</span><span class="p">(</span><span class="s2">&quot;pose&quot;</span><span class="p">)</span>
<span class="n">sub_lie_vals</span><span class="p">[</span><span class="s2">&quot;vec&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">V3</span><span class="o">.</span><span class="n">symbolic</span><span class="p">(</span><span class="s2">&quot;vec&quot;</span><span class="p">)</span>

<span class="n">lie_vals</span><span class="p">[</span><span class="s2">&quot;sub_vals&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sub_lie_vals</span>

<span class="n">display</span><span class="p">(</span><span class="n">lie_vals</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Values(
  scalar: x,
  rot3: &lt;Rot3 &lt;Q xyzw=[rot_x, rot_y, rot_z, rot_w]&gt;&gt;,
  sub_vals:   Values(
    pose3: &lt;Pose3 R=&lt;Rot3 &lt;Q xyzw=[pose.R_x, pose.R_y, pose.R_z, pose.R_w]&gt;&gt;, t=(pose.t0, pose.t1, pose.t2)&gt;,
    vec: Matrix([
[vec0],
[vec1],
[vec2]]),
  ),
)
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">display</span><span class="p">(</span><span class="n">lie_vals</span><span class="o">.</span><span class="n">tangent_dim</span><span class="p">())</span>
<span class="n">display</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">lie_vals</span><span class="o">.</span><span class="n">to_tangent</span><span class="p">()))</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="math notranslate nohighlight">
$\displaystyle 13$</div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="math notranslate nohighlight">
$\displaystyle 13$</div></div>
</div>
<p>Importantly, we can compute the jacobian of the storage space of the object with respect to its tangent space:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">display</span><span class="p">(</span><span class="n">lie_vals</span><span class="o">.</span><span class="n">storage_D_tangent</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="math notranslate nohighlight">
$\displaystyle \left[\begin{array}{ccccccccccccc}1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\0 &amp; \frac{rot_{w}}{2} &amp; - \frac{rot_{z}}{2} &amp; \frac{rot_{y}}{2} &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\0 &amp; \frac{rot_{z}}{2} &amp; \frac{rot_{w}}{2} &amp; - \frac{rot_{x}}{2} &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\0 &amp; - \frac{rot_{y}}{2} &amp; \frac{rot_{x}}{2} &amp; \frac{rot_{w}}{2} &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\0 &amp; - \frac{rot_{x}}{2} &amp; - \frac{rot_{y}}{2} &amp; - \frac{rot_{z}}{2} &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\0 &amp; 0 &amp; 0 &amp; 0 &amp; \frac{pose.R_{w}}{2} &amp; - \frac{pose.R_{z}}{2} &amp; \frac{pose.R_{y}}{2} &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\0 &amp; 0 &amp; 0 &amp; 0 &amp; \frac{pose.R_{z}}{2} &amp; \frac{pose.R_{w}}{2} &amp; - \frac{pose.R_{x}}{2} &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\0 &amp; 0 &amp; 0 &amp; 0 &amp; - \frac{pose.R_{y}}{2} &amp; \frac{pose.R_{x}}{2} &amp; \frac{pose.R_{w}}{2} &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\0 &amp; 0 &amp; 0 &amp; 0 &amp; - \frac{pose.R_{x}}{2} &amp; - \frac{pose.R_{y}}{2} &amp; - \frac{pose.R_{z}}{2} &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0\\0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 0\\0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0\\0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1\end{array}\right]$</div></div>
</div>
<p>This means that we can use the elements of the object to compute a residual, and then compute the jacobian of such a residual with respect to the tangent space of our values object.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">residual</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Matrix</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">residual</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">lie_vals</span><span class="p">[</span><span class="s2">&quot;rot3&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">lie_vals</span><span class="p">[</span><span class="s2">&quot;sub_vals.vec&quot;</span><span class="p">]</span>
<span class="n">residual</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">6</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">lie_vals</span><span class="p">[</span><span class="s2">&quot;sub_vals.pose3&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">lie_vals</span><span class="p">[</span><span class="s2">&quot;sub_vals.vec&quot;</span><span class="p">]</span>
<span class="n">display</span><span class="p">(</span><span class="n">residual</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="math notranslate nohighlight">
$\displaystyle \left[\begin{matrix}vec_{0} \left(- 2 rot_{y}^{2} - 2 rot_{z}^{2} + 1\right) + vec_{1} \left(- 2 rot_{w} rot_{z} + 2 rot_{x} rot_{y}\right) + vec_{2} \cdot \left(2 rot_{w} rot_{y} + 2 rot_{x} rot_{z}\right)\\vec_{0} \cdot \left(2 rot_{w} rot_{z} + 2 rot_{x} rot_{y}\right) + vec_{1} \left(- 2 rot_{x}^{2} - 2 rot_{z}^{2} + 1\right) + vec_{2} \left(- 2 rot_{w} rot_{x} + 2 rot_{y} rot_{z}\right)\\vec_{0} \left(- 2 rot_{w} rot_{y} + 2 rot_{x} rot_{z}\right) + vec_{1} \cdot \left(2 rot_{w} rot_{x} + 2 rot_{y} rot_{z}\right) + vec_{2} \left(- 2 rot_{x}^{2} - 2 rot_{y}^{2} + 1\right)\\pose.t0 + vec_{0} \left(- 2 pose.R_{y}^{2} - 2 pose.R_{z}^{2} + 1\right) + vec_{1} \left(- 2 pose.R_{w} pose.R_{z} + 2 pose.R_{x} pose.R_{y}\right) + vec_{2} \cdot \left(2 pose.R_{w} pose.R_{y} + 2 pose.R_{x} pose.R_{z}\right)\\pose.t1 + vec_{0} \cdot \left(2 pose.R_{w} pose.R_{z} + 2 pose.R_{x} pose.R_{y}\right) + vec_{1} \left(- 2 pose.R_{x}^{2} - 2 pose.R_{z}^{2} + 1\right) + vec_{2} \left(- 2 pose.R_{w} pose.R_{x} + 2 pose.R_{y} pose.R_{z}\right)\\pose.t2 + vec_{0} \left(- 2 pose.R_{w} pose.R_{y} + 2 pose.R_{x} pose.R_{z}\right) + vec_{1} \cdot \left(2 pose.R_{w} pose.R_{x} + 2 pose.R_{y} pose.R_{z}\right) + vec_{2} \left(- 2 pose.R_{x}^{2} - 2 pose.R_{y}^{2} + 1\right)\end{matrix}\right]$</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">residual_D_tangent</span> <span class="o">=</span> <span class="n">residual</span><span class="o">.</span><span class="n">jacobian</span><span class="p">(</span><span class="n">lie_vals</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">residual_D_tangent</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">residual_D_tangent</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="math notranslate nohighlight">
$\displaystyle \left( 6, \  13\right)$</div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="math notranslate nohighlight">
$\displaystyle \left[\begin{array}{ccccccccccccc}0 &amp; vec_{1} \cdot \left(2 rot_{w} rot_{y} + 2 rot_{x} rot_{z}\right) + vec_{2} \cdot \left(2 rot_{w} rot_{z} - 2 rot_{x} rot_{y}\right) &amp; vec_{0} \left(- 2 rot_{w} rot_{y} - 2 rot_{x} rot_{z}\right) + vec_{2} \left(rot_{w}^{2} + rot_{x}^{2} - rot_{y}^{2} - rot_{z}^{2}\right) &amp; vec_{0} \left(- 2 rot_{w} rot_{z} + 2 rot_{x} rot_{y}\right) + vec_{1} \left(- rot_{w}^{2} - rot_{x}^{2} + rot_{y}^{2} + rot_{z}^{2}\right) &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; - 2 rot_{y}^{2} - 2 rot_{z}^{2} + 1 &amp; - 2 rot_{w} rot_{z} + 2 rot_{x} rot_{y} &amp; 2 rot_{w} rot_{y} + 2 rot_{x} rot_{z}\\0 &amp; vec_{1} \left(- 2 rot_{w} rot_{x} + 2 rot_{y} rot_{z}\right) + vec_{2} \left(- rot_{w}^{2} + rot_{x}^{2} - rot_{y}^{2} + rot_{z}^{2}\right) &amp; vec_{0} \cdot \left(2 rot_{w} rot_{x} - 2 rot_{y} rot_{z}\right) + vec_{2} \cdot \left(2 rot_{w} rot_{z} + 2 rot_{x} rot_{y}\right) &amp; vec_{0} \left(rot_{w}^{2} - rot_{x}^{2} + rot_{y}^{2} - rot_{z}^{2}\right) + vec_{1} \left(- 2 rot_{w} rot_{z} - 2 rot_{x} rot_{y}\right) &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 2 rot_{w} rot_{z} + 2 rot_{x} rot_{y} &amp; - 2 rot_{x}^{2} - 2 rot_{z}^{2} + 1 &amp; - 2 rot_{w} rot_{x} + 2 rot_{y} rot_{z}\\0 &amp; vec_{1} \left(rot_{w}^{2} - rot_{x}^{2} - rot_{y}^{2} + rot_{z}^{2}\right) + vec_{2} \left(- 2 rot_{w} rot_{x} - 2 rot_{y} rot_{z}\right) &amp; vec_{0} \left(- rot_{w}^{2} + rot_{x}^{2} + rot_{y}^{2} - rot_{z}^{2}\right) + vec_{2} \left(- 2 rot_{w} rot_{y} + 2 rot_{x} rot_{z}\right) &amp; vec_{0} \cdot \left(2 rot_{w} rot_{x} + 2 rot_{y} rot_{z}\right) + vec_{1} \cdot \left(2 rot_{w} rot_{y} - 2 rot_{x} rot_{z}\right) &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; - 2 rot_{w} rot_{y} + 2 rot_{x} rot_{z} &amp; 2 rot_{w} rot_{x} + 2 rot_{y} rot_{z} &amp; - 2 rot_{x}^{2} - 2 rot_{y}^{2} + 1\\0 &amp; 0 &amp; 0 &amp; 0 &amp; vec_{1} \cdot \left(2 pose.R_{w} pose.R_{y} + 2 pose.R_{x} pose.R_{z}\right) + vec_{2} \cdot \left(2 pose.R_{w} pose.R_{z} - 2 pose.R_{x} pose.R_{y}\right) &amp; vec_{0} \left(- 2 pose.R_{w} pose.R_{y} - 2 pose.R_{x} pose.R_{z}\right) + vec_{2} \left(pose.R_{w}^{2} + pose.R_{x}^{2} - pose.R_{y}^{2} - pose.R_{z}^{2}\right) &amp; vec_{0} \left(- 2 pose.R_{w} pose.R_{z} + 2 pose.R_{x} pose.R_{y}\right) + vec_{1} \left(- pose.R_{w}^{2} - pose.R_{x}^{2} + pose.R_{y}^{2} + pose.R_{z}^{2}\right) &amp; 1 &amp; 0 &amp; 0 &amp; - 2 pose.R_{y}^{2} - 2 pose.R_{z}^{2} + 1 &amp; - 2 pose.R_{w} pose.R_{z} + 2 pose.R_{x} pose.R_{y} &amp; 2 pose.R_{w} pose.R_{y} + 2 pose.R_{x} pose.R_{z}\\0 &amp; 0 &amp; 0 &amp; 0 &amp; vec_{1} \left(- 2 pose.R_{w} pose.R_{x} + 2 pose.R_{y} pose.R_{z}\right) + vec_{2} \left(- pose.R_{w}^{2} + pose.R_{x}^{2} - pose.R_{y}^{2} + pose.R_{z}^{2}\right) &amp; vec_{0} \cdot \left(2 pose.R_{w} pose.R_{x} - 2 pose.R_{y} pose.R_{z}\right) + vec_{2} \cdot \left(2 pose.R_{w} pose.R_{z} + 2 pose.R_{x} pose.R_{y}\right) &amp; vec_{0} \left(pose.R_{w}^{2} - pose.R_{x}^{2} + pose.R_{y}^{2} - pose.R_{z}^{2}\right) + vec_{1} \left(- 2 pose.R_{w} pose.R_{z} - 2 pose.R_{x} pose.R_{y}\right) &amp; 0 &amp; 1 &amp; 0 &amp; 2 pose.R_{w} pose.R_{z} + 2 pose.R_{x} pose.R_{y} &amp; - 2 pose.R_{x}^{2} - 2 pose.R_{z}^{2} + 1 &amp; - 2 pose.R_{w} pose.R_{x} + 2 pose.R_{y} pose.R_{z}\\0 &amp; 0 &amp; 0 &amp; 0 &amp; vec_{1} \left(pose.R_{w}^{2} - pose.R_{x}^{2} - pose.R_{y}^{2} + pose.R_{z}^{2}\right) + vec_{2} \left(- 2 pose.R_{w} pose.R_{x} - 2 pose.R_{y} pose.R_{z}\right) &amp; vec_{0} \left(- pose.R_{w}^{2} + pose.R_{x}^{2} + pose.R_{y}^{2} - pose.R_{z}^{2}\right) + vec_{2} \left(- 2 pose.R_{w} pose.R_{y} + 2 pose.R_{x} pose.R_{z}\right) &amp; vec_{0} \cdot \left(2 pose.R_{w} pose.R_{x} + 2 pose.R_{y} pose.R_{z}\right) + vec_{1} \cdot \left(2 pose.R_{w} pose.R_{y} - 2 pose.R_{x} pose.R_{z}\right) &amp; 0 &amp; 0 &amp; 1 &amp; - 2 pose.R_{w} pose.R_{y} + 2 pose.R_{x} pose.R_{z} &amp; 2 pose.R_{w} pose.R_{x} + 2 pose.R_{y} pose.R_{z} &amp; - 2 pose.R_{x}^{2} - 2 pose.R_{y}^{2} + 1\end{array}\right]$</div></div>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">symforce</a></h1>



<p class="blurb">Fast symbolic computation, code generation, and nonlinear optimization for robotics</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=symforce-org&repo=symforce&type=star&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../development.html">Development Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="sympy_tutorial.html">SymPy Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="geometry_tutorial.html">Geometry Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="ops_tutorial.html">Ops Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="cameras_tutorial.html">Cameras Tutorial</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Values Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Lie-Group-Operations">Lie Group Operations</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="codegen_tutorial.html">Codegen Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="optimization_tutorial.html">Optimization Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="epsilon_tutorial.html">Epsilon Tutorial</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../examples/bundle_adjustment/README.html">Bundle Adjustment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/bundle_adjustment_fixed_size/README.html">Fixed Size Bundle Adjustment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/bundle_adjustment_in_the_large/README.html">Bundle-Adjustment-in-the-Large</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/custom_factor_generation/README.html">Custom Factor Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/robot_2d_localization/README.html">Robot 2D Localization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/robot_3d_localization/README.html">Robot 3D Localization</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">symforce Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/symforce.html">symforce package</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">sym Python Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api-gen-py/sym.html">sym package</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">sym C++ Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api-gen-cpp/classlist.html">Class list</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api-gen-cpp/filelist.html">File list</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">opt C++ Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api-cpp/classlist.html">Class list</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api-cpp/filelist.html">File list</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="cameras_tutorial.html" title="previous chapter">Cameras Tutorial</a></li>
      <li>Next: <a href="codegen_tutorial.html" title="next chapter">Codegen Tutorial</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2022, Skydio, Inc.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.5.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/tutorials/values_tutorial.ipynb.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>